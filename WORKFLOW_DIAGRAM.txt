╔═══════════════════════════════════════════════════════════════════════════════╗
║                    LANDBLOCKIFY COMPLETE WORKFLOW DIAGRAM                      ║
╚═══════════════════════════════════════════════════════════════════════════════╝


┌─────────────────────────────────────────────────────────────────────────────┐
│ STAGE 1: SELLER REGISTERS LAND                                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Seller Dashboard                                                            │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ Register New Land                                                    │  │
│  │ ┌─────────────────────────────────────────────────────────────────┐ │  │
│  │ │ Property ID:        [PROP001]                                   │ │  │
│  │ │ Owner Name:         [john@example.com]                          │ │  │
│  │ │ Location:           [123 Main Street]                           │ │  │
│  │ │ Land Area:          [5000 sq m]                                 │ │  │
│  │ │ Property Type:      [Residential]                               │ │  │
│  │ │ Legal Description:  [...]                                       │ │  │
│  │ │ Document:           [document.pdf] ✓                            │ │  │
│  │ │                                                                  │ │  │
│  │ │ [SUBMIT FOR REGISTRATION]                                       │ │  │
│  │ └─────────────────────────────────────────────────────────────────┘ │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  POST /api/register-land                                                    │
│                ↓                                                             │
│  Database: land_properties                                                  │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ id | propertyId | ownerName | location | status                     │  │
│  │ 1  │ PROP001    │ john@...  │ 123 Main │ PENDING ⏳                 │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│ STAGE 2: GOVERNMENT APPROVES & REGISTERS ON BLOCKCHAIN                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Government Dashboard                                                       │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ Document Verification & Blockchain Registration                      │  │
│  │ ┌─────────────────────────────────────────────────────────────────┐ │  │
│  │ │ [Connect Wallet] → MetaMask Connected ✓                        │ │  │
│  │ │                                                                  │ │  │
│  │ │ Pending Lands:                                                  │ │  │
│  │ │ ┌─────────────────────────────────────────────────────────────┐ │ │  │
│  │ │ │ Property ID: PROP001                                        │ │ │  │
│  │ │ │ Owner: john@example.com                                     │ │ │  │
│  │ │ │ Location: 123 Main Street                                   │ │ │  │
│  │ │ │ Area: 5000 sq m                                             │ │ │  │
│  │ │ │ [✅ APPROVE & REGISTER] [❌ REJECT]                         │ │ │  │
│  │ │ └─────────────────────────────────────────────────────────────┘ │ │  │
│  │ └─────────────────────────────────────────────────────────────────┘ │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  POST /api/gov/approve-land/:id                                             │
│                ↓                                                             │
│  1. Connect MetaMask Wallet                                                 │
│  2. Register on Blockchain (Polygon Amoy)                                   │
│  3. Update Database Status                                                  │
│  4. Store Blockchain TX Hash                                                │
│                ↓                                                             │
│  Database: land_properties                                                  │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ id | propertyId | status   | blockchain_tx_hash                      │  │
│  │ 1  │ PROP001    │ APPROVED │ 0x1234567890abcdef... ✓               │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  Blockchain: Polygon Amoy Testnet                                           │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ LandRegistry Contract                                                │  │
│  │ ├─ Property: PROP001                                                │  │
│  │ ├─ Owner Name: john@example.com                                     │  │
│  │ ├─ Government: 0x[govt_address]                                     │  │
│  │ └─ Status: Registered ✓                                             │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ✅ Land now visible in Marketplace                                         │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│ STAGE 3: BUYER REQUESTS TO BUY                                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Buyer Dashboard - Marketplace                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ Approved Lands for Sale                                              │  │
│  │ ┌─────────────────────────────────────────────────────────────────┐ │  │
│  │ │ Property ID: PROP001                                            │ │  │
│  │ │ Owner: john@example.com                                         │ │  │
│  │ │ Location: 123 Main Street                                       │ │  │
│  │ │ Area: 5000 sq m                                                 │ │  │
│  │ │ Status: ✅ APPROVED                                             │ │  │
│  │ │                                                                  │ │  │
│  │ │ [VIEW DETAILS] → [📩 REQUEST TO BUY]                            │ │  │
│  │ └─────────────────────────────────────────────────────────────────┘ │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  POST /api/transactions/request                                             │
│  {                                                                           │
│    propertyId: "PROP001",                                                   │
│    buyerEmail: "buyer@example.com",                                         │
│    sellerEmail: "john@example.com"                                          │
│  }                                                                           │
│                ↓                                                             │
│  Database: transactions                                                     │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ id | propertyId | buyerEmail | sellerEmail | status                 │  │
│  │ 1  │ PROP001    │ buyer@...  │ john@...    │ REQUESTED ⏳           │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│ STAGE 4: SELLER ACCEPTS REQUEST                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Seller Dashboard - Buy Requests                                            │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ Incoming Buy Requests                                                │  │
│  │ ┌─────────────────────────────────────────────────────────────────┐ │  │
│  │ │ Property ID: PROP001                                            │ │  │
│  │ │ Buyer: buyer@example.com                                        │ │  │
│  │ │ Status: REQUESTED                                               │ │  │
│  │ │                                                                  │ │  │
│  │ │ [✅ ACCEPT] [❌ REJECT]                                          │ │  │
│  │ └─────────────────────────────────────────────────────────────────┘ │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  POST /api/transactions/accept                                              │
│  { id: 1 }                                                                  │
│                ↓                                                             │
│  Database: transactions                                                     │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ id | propertyId | status                                             │  │
│  │ 1  │ PROP001    │ ACCEPTED ✓                                         │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│ STAGE 5: GOVERNMENT APPROVES TRANSACTION                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Government Dashboard - Transaction Approvals                               │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ Accepted Transactions Ready for Approval                             │  │
│  │ ┌─────────────────────────────────────────────────────────────────┐ │  │
│  │ │ Property ID: PROP001                                            │ │  │
│  │ │ Buyer: buyer@example.com                                        │ │  │
│  │ │ Seller: john@example.com                                        │ │  │
│  │ │ Status: ACCEPTED                                                │ │  │
│  │ │                                                                  │ │  │
│  │ │ [✅ APPROVE TRANSACTION]                                         │ │  │
│  │ └─────────────────────────────────────────────────────────────────┘ │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  POST /api/transactions/approve-transaction/:id                             │
│                ↓                                                             │
│  Database: transactions                                                     │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ id | propertyId | status                                             │  │
│  │ 1  │ PROP001    │ GOVERNMENT APPROVED ✓                             │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ✅ Ready for Blockchain Finalization                                       │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│ STAGE 6: FINALIZE BLOCKCHAIN TRANSACTION                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Government Dashboard - Blockchain Finalization                             │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ Government Approved Transactions                                     │  │
│  │ ┌─────────────────────────────────────────────────────────────────┐ │  │
│  │ │ Property ID: PROP001                                            │ │  │
│  │ │ Buyer: buyer@example.com                                        │ │  │
│  │ │ Seller: john@example.com                                        │ │  │
│  │ │ Status: GOVERNMENT APPROVED                                     │ │  │
│  │ │                                                                  │ │  │
│  │ │ [🔗 FINALIZE ON BLOCKCHAIN]                                     │ │  │
│  │ └─────────────────────────────────────────────────────────────────┘ │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  POST /api/transactions/finalize-blockchain/:id                             │
│                ↓                                                             │
│  1. Execute Property Transfer on Blockchain                                 │
│  2. Record Transaction Hash                                                 │
│  3. Update Database Status                                                  │
│                ↓                                                             │
│  Blockchain: Polygon Amoy Testnet                                           │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ PropertyTransfer Contract                                            │  │
│  │ ├─ Property: PROP001                                                │  │
│  │ ├─ From: john@example.com (seller)                                  │  │
│  │ ├─ To: buyer@example.com (buyer)                                    │  │
│  │ ├─ Status: TRANSFERRED ✓                                            │  │
│  │ └─ TX Hash: 0x9876543210fedcba...                                   │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                ↓                                                             │
│  Database: transactions                                                     │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │ id | propertyId | status    | blockchain_tx_hash                     │  │
│  │ 1  │ PROP001    │ COMPLETED │ 0x9876543210fedcba... ✓              │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ✅✅✅ TRANSACTION COMPLETE - PROPERTY TRANSFERRED ✅✅✅                    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘


╔═══════════════════════════════════════════════════════════════════════════════╗
║                            STATUS FLOW SUMMARY                                ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  LAND PROPERTIES:                                                             ║
║  ┌─────────────┐      ┌──────────┐      ┌──────────────────┐                ║
║  │   PENDING   │ ───→ │ APPROVED │ ───→ │ (In Marketplace) │                ║
║  └─────────────┘      └──────────┘      └──────────────────┘                ║
║         ↓                                                                     ║
║      REJECTED                                                                 ║
║                                                                               ║
║  TRANSACTIONS:                                                                ║
║  ┌──────────┐      ┌──────────┐      ┌────────────────────┐      ┌──────────┐║
║  │REQUESTED │ ───→ │ ACCEPTED │ ───→ │ GOVERNMENT APPROVED│ ───→ │COMPLETED││
║  └──────────┘      └──────────┘      └────────────────────┘      └──────────┘║
║       ↓                 ↓                      ↓                               ║
║    REJECTED          REJECTED              REJECTED                           ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝


╔═══════════════════════════════════════════════════════════════════════════════╗
║                         KEY BLOCKCHAIN DETAILS                                ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  Network:        Polygon Amoy Testnet                                         ║
║  Chain ID:       80002 (0x13882)                                              ║
║  RPC URL:        https://rpc-amoy.polygon.technology/                        ║
║  Currency:       POL (test tokens)                                            ║
║  Block Explorer: https://www.oklink.com/amoy                                 ║
║                                                                               ║
║  Smart Contracts:                                                             ║
║  ├─ LandRegistry:    0x7f9dda378bbebb99038be1bd7830663d5d90ba47              ║
║  └─ PropertyTransfer: 0x76ff87120de0ddcdb09fac0052de6ee6da383012             ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
